#!/usr/bin/env bash
# no strict, as read errors on timeout, so we need to capture that

read -t 15 -r -n 1 -p "${1?"USAGE: confirm-negative <message>"} (y/N) " answer
if test "$?" -gt 128; then
	# timeout should equal default
	exit 0
fi
echo ""

# escape key should equal no
if test "$answer" = $'\x1b'; then
	exit 1
fi

# not false case, allows fallback to default on unexpected value
test "$answer" != "y"