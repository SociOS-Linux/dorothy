#!/usr/bin/env bash
set -e

echo -e '\nInstalling commenced...'

# Bare minimum requirements for proceeding further
# install command line tools
xcode-select --install
# upgrade bash to prevent legacy errors from our scripts
if ! is_latest_bash; then
	echo 'upgrading bash...'
	if ! command_exists brew; then
		ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
	fi
	brew install bash
	usesh "$(which bash)"
fi
# continue

echo ''; if confirm "Would you like to restore from backup?"; then
	macup restore
fi
echo ''

setup-mac-settings
setup-mac-brew
setup-mac-apps
setup-mac-fonts

setup-install

setup-mac-clean

echo -e '\nInstallation completed successfully.'
