#!/usr/bin/env bash
source "$HOME/.scripts/sources/strict.bash"

function convert() {
	local input="$1"
	local output="${1%.*}-noaudio.mp4"
	rm -f "$output"
	echo "converting $input to $output"
	ffmpeg -i "$input" -c copy -an "$output" &>/dev/null && echo "converted  $input to $output" || echo "conversion of $input to $output FAILED"
}

if is-empty-string "${1:-}"; then
	find ./*.264 | while read -r file; do
		convert "$file"
	done
else
	convert "$1"
fi
