#!/usr/bin/env bash
# thanks to http://unix.stackexchange.com/a/358209/50703 for the help on this one
set -e

# not sure why we use the -g option
# default-shell is here to prevent tmux from inheriting say the fish shell, which will break the && exit
command="tmux new session \\; set-option -g default-shell '$(command -v bash)'"

for arg in "$@"; do
	command="$command \\; split-window \\; send-keys '$arg && exit' C-m"
done

eval "$command"