#!/usr/bin/env bash
set -e

# Check
if ! command_exists apm; then
	echo -e "\nAtom (apm) does not seem to be installed..."
	exit
fi

# User
source "$HOME/.scripts/sources/user.sh"

# Mode
if test "$1" == "update"; then
	mode="update"
else
	mode="install"
fi

# Update
echo -e "\nUpdating existing Atom plugins..."
apm update --no-confirm

# Install
if test -n "$ATOM_INSTALL"; then
	if test "$mode" == "install"; then
		echo -e "\nInstalling Atom plugins..."
		apm install "$ATOM_INSTALL"
	fi
fi